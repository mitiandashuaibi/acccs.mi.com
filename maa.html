<!-- <!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Print</title></head>
<body>
<script>
const t = new URLSearchParams(location.search).get('text') || '测试成功';
document.body.textContent = decodeURIComponent(t);
</script>
</body>
</html> -->
<!DOCTYPE html>
<html>
<head>
    <title>Get System Info</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; padding: 10px; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>系统信息</h1>
    <button onclick="getSystemInfo()">点击获取</button>
    <div id="result-container"></div>
    <script>
        function getSystemInfo() {
            const resultContainer = document.getElementById('result-container');
            resultContainer.innerHTML = '正在获取...';
            try {
                // 确保 PASSPORT_JSB_METHOD_INVOKER 对象存在
                if (!window.PASSPORT_JSB_METHOD_INVOKER) {
                    throw new Error("JSBridge (PASSPORT_JSB_METHOD_INVOKER) not found.");
                }
                console.log("调用原生方法: getSystemInfo");
                // 1. 直接调用并接收同步返回的字符串
                //    第二个参数可以是空 JSON "{}", 因为 g8.k 的实现没有用到它
                const resultString = window.PASSPORT_JSB_METHOD_INVOKER.invokeMethod("getSystemInfo", "{}");
                console.log("原生同步返回: ", resultString);
                // 2. 解析返回的 JSON 字符串
                const data = JSON.parse(resultString);
                // 3. 检查返回码并处理数据
                if (data.code === 0) {
                    const systemInfo = data.result;
                    let htmlMessage = "<table><tr><th>属性</th><th>值</th></tr>";
                    for (const key in systemInfo) {
                        htmlMessage += "<tr><td><b>" + key + "</b></td><td>" + systemInfo[key] + "</td></tr>";
                    }
                    htmlMessage += "</table>";
                    resultContainer.innerHTML = htmlMessage;
                } else {
                    // 如果原生代码出错，显示错误信息
                    throw new Error(`原生方法返回错误: code=${data.code}, message=${data.message}`);
                }
            } catch (error) {
                console.error("获取系统信息时发生错误:", error);
                resultContainer.innerHTML = '<p class="error">获取失败: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>

